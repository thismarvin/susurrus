var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,d){a.raw=d;return a};$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var d="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var d,b=[];!(d=a.next()).done;)b.push(d.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var d=function(){};d.prototype=a;return new d};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},d={};try{return d.__proto__=a,d.a}catch(b){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,d){a.__proto__=d;if(a.__proto__!==d)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,d){a.prototype=$jscomp.objectCreate(d.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(a,d)}else for(b in d)if("prototype"!=b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(d,b);e&&Object.defineProperty(a,b,e)}else a[b]=d[b];a.superClass_=d.prototype};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<a.length;++d){var b=a[d];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},d=Object.create(new $jscomp.global.Proxy(a,{get:function(b,e,f){return b==a&&"q"==e&&f==d}}));return!0===d.q}catch(b){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+d++,b)}var d=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");var $jscomp$lookupPolyfilledValue=function(a,d){var b=$jscomp.propertyToPolyfillSymbol[d];if(null==b)return a[d];b=a[b];return void 0!==b?b:a[d]};$jscomp.polyfill=function(a,d,b,e){d&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,d,b,e):$jscomp.polyfillUnisolated(a,d,b,e))};
$jscomp.polyfillUnisolated=function(a,d,b,e){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})};
$jscomp.polyfillIsolated=function(a,d,b,e){var f=a.split(".");a=1===f.length;e=f[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var p=0;p<f.length-1;p++){var k=f[p];k in e||(e[k]={});e=e[k]}f=f[f.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?e[f]:null;d=d(b);null!=d&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:d}):d!==b&&($jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+f,f=$jscomp.propertyToPolyfillSymbol[f],
$jscomp.defineProperty(e,f,{configurable:!0,writable:!0,value:d})))};
$jscomp.polyfill("WeakMap",function(a){function d(){if(!a||!Object.seal)return!1;try{var e=Object.seal({}),d=Object.seal({}),b=new a([[e,2],[d,3]]);if(2!=b.get(e)||3!=b.get(d))return!1;b.delete(e);b.set(d,4);return!b.has(e)&&4==b.get(d)}catch(B){return!1}}function b(){}function e(a){var b=typeof a;return"object"===b&&null!==a||"function"===b}function f(a){if(!$jscomp.owns(a,k)){var e=new b;$jscomp.defineProperty(a,k,{value:e})}}function p(a){var e=Object[a];e&&(Object[a]=function(a){if(a instanceof
b)return a;f(a);return e(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;var k="$jscomp_hidden_"+Math.random();p("freeze");p("preventExtensions");p("seal");var v=0,n=function(a){this.id_=(v+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var e;!(e=a.next()).done;)e=e.value,this.set(e[0],e[1])}};n.prototype.set=function(a,b){if(!e(a))throw Error("Invalid WeakMap key");f(a);if(!$jscomp.owns(a,k))throw Error("WeakMap key fail: "+
a);a[k][this.id_]=b;return this};n.prototype.get=function(a){return e(a)&&$jscomp.owns(a,k)?a[k][this.id_]:void 0};n.prototype.has=function(a){return e(a)&&$jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)};n.prototype.delete=function(a){return e(a)&&$jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)?delete a[k][this.id_]:!1};return n},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),b=new a($jscomp.makeIterator([[e,"s"]]));if("s"!=b.get(e)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var d=b.entries(),f=d.next();if(f.done||f.value[0]!=e||"s"!=f.value[1])return!1;f=d.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!d.next().done?!1:!0}catch(B){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;$jscomp.initSymbolIterator();var b=new WeakMap,e=function(a){this.data_={};this.head_=k();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var e;!(e=a.next()).done;)e=e.value,this.set(e[0],e[1])}};e.prototype.set=function(a,e){a=0===a?0:a;var b=f(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=e:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:e},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};e.prototype.delete=function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=k();this.size=0};e.prototype.has=function(a){return!!f(this,a).entry};
e.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};e.prototype.entries=function(){return p(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return p(this,function(a){return a.key})};e.prototype.values=function(){return p(this,function(a){return a.value})};e.prototype.forEach=function(a,b){for(var e=this.entries(),d;!(d=e.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var f=function(a,e){var d=e&&typeof e;"object"==
d||"function"==d?b.has(e)?d=b.get(e):(d=""+ ++v,b.set(e,d)):d="p_"+e;var f=a.data_[d];if(f&&$jscomp.owns(a.data_,d))for(a=0;a<f.length;a++){var k=f[a];if(e!==e&&k.key!==k.key||e===k.key)return{id:d,list:f,index:a,entry:k}}return{id:d,list:f,index:-1,entry:void 0}},p=function(a,e){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:e(b)};b=null}return{done:!0,value:void 0}})},k=function(){var a={};return a.previous=
a.next=a.head=a},v=0;return e},"es6","es3");
$jscomp.polyfill("Set",function(a){function d(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),b=new a($jscomp.makeIterator([e]));if(!b.has(e)||1!=b.size||b.add(e)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var d=b.entries(),k=d.next();if(k.done||k.value[0]!=e||k.value[1]!=e)return!1;k=d.next();return k.done||k.value[0]==e||4!=k.value[0].x||k.value[1]!=k.value[0]?!1:d.next().done}catch(v){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};b.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();
this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var d=this;this.map_.forEach(function(e){return a.call(b,e,e,d)})};return b},"es6","es3");
$jscomp.polyfill("Reflect.isExtensible",function(a){return a?a:$jscomp.ASSUME_ES5||"function"==typeof Object.isExtensible?Object.isExtensible:function(){return!0}},"es6","es3");$jscomp.polyfill("Reflect.getOwnPropertyDescriptor",function(a){return a||Object.getOwnPropertyDescriptor},"es6","es5");$jscomp.polyfill("Reflect.getPrototypeOf",function(a){return a||Object.getPrototypeOf},"es6","es5");
$jscomp.findDescriptor=function(a,d){for(;a;){var b=Reflect.getOwnPropertyDescriptor(a,d);if(b)return b;a=Reflect.getPrototypeOf(a)}};$jscomp.polyfill("Reflect.set",function(a){return a?a:function(a,b,e,f){var d=$jscomp.findDescriptor(a,b);return d?d.set?(d.set.call(3<arguments.length?f:a,e),!0):d.writable&&!Object.isFrozen(a)?(a[b]=e,!0):!1:Reflect.isExtensible(a)?(a[b]=e,!0):!1}},"es6","es5");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,b,e){var d=this.length||0;0>b&&(b=Math.max(0,d+b));if(null==e||e>d)e=d;e=Number(e);0>e&&(e=Math.max(0,d+e));for(b=Number(b||0);b<e;b++)this[b]=a;return this}},"es6","es3");
(function(a,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports):"function"===typeof define&&define.amd?define(["exports"],d):(a=a||self,d(a.Susurrus={}))})(this,function(a){function d(a,c,h){c=e(a,a.VERTEX_SHADER,c);h=e(a,a.FRAGMENT_SHADER,h);var g=a.createProgram();a.attachShader(g,c);a.attachShader(g,h);a.linkProgram(g);if(!a.getProgramParameter(g,a.LINK_STATUS))throw Error("An error occurred while initializing the shader program: "+a.getProgramInfoLog(g));return g}function b(a,
c,h,b){var g=a.createBuffer();a.bindBuffer(c,g);a.bufferData(c,h,b);return g}function e(a,c,h){c=a.createShader(c);a.shaderSource(c,h);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw h=Error("An error occurred will compiling the shader: "+a.getShaderInfoLog(c)),a.deleteShader(c),h;return c}function f(a,c,h){switch(c.toLowerCase()){case "array":a=Array.isArray(a);break;default:a=typeof a===c}return k(a,h,"Expected value to be a(n) '"+c+"'.")}function p(a,c,h){return k(a instanceof
c,h,"Expected value to be an instance of '"+c.name+"'.")}function k(a,c,h){var g=function(){throw new TypeError(h);};if(void 0===c)a||g();else if("object"===typeof c){if(void 0!==c.throwError&&"boolean"===typeof c.throwError&&!c.throwError)return a;if(!a){if(void 0!==c.errorMessage){if("string"===typeof c.errorMessage&&0<c.errorMessage.length)throw new TypeError(c.errorMessage);g()}if(void 0!==c.addendum){if("string"===typeof c.addendum&&0<c.addendum.length)throw new TypeError(h+" "+c.addendum);g()}}}}
function v(a){if(.00390625>=a)return 0;if(1>=a)return a;a=parseInt(a)/255;a=Math.max(0,a);return a=Math.min(1,a)}var n=function(a){Object.defineProperty(this,"gl",{value:a,writable:!1});Object.defineProperty(this,"extensions",{value:{ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays")},writable:!1});this._currentProgram=null;a=this.gl;a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)};n.prototype.clear=function(a){var g=this.gl;g.clearColor(a.r,a.g,a.b,a.a);g.clear(g.COLOR_BUFFER_BIT|
g.DEPTH_BUFFER_BIT)};n.prototype.begin=function(a){this._currentProgram=a.program;this.gl.useProgram(this._currentProgram)};n.prototype.setVertexBuffer=function(a){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.buffer);for(var g=$jscomp.makeIterator(a.attributeSchema.elements),h=g.next();!h.done;h=g.next()){h=h.value;var b=this.gl.getAttribLocation(this._currentProgram,h.name);if(0>b)throw Error("The current program does not have a(n) '"+h.name+"' attribute.");this.gl.enableVertexAttribArray(b);this.gl.vertexAttribPointer(b,
h.size,h.type,!1,h.stride,h.offset);0<a.instanceFrequency&&this.extensions.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(b,a.instanceFrequency)}};n.prototype.setVertexBuffers=function(a){a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next())this.setVertexBuffer(g.value)};n.prototype.setIndexBuffer=function(a){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.buffer)};n.prototype.setUniform=function(a,c){a=this.gl.getUniformLocation(this._currentProgram,a);this.gl.uniformMatrix4fv(a,!1,
c)};n.prototype.drawArrays=function(a,c,h){this.gl.drawArrays(a,c,h)};n.prototype.drawElements=function(a,c,h){this.gl.drawElements(a,3*c,this.gl.UNSIGNED_SHORT,h)};n.prototype.drawInstancedElements=function(a,c,h,b){this.extensions.ANGLE_instanced_arrays.drawElementsInstancedANGLE(a,3*c,this.gl.UNSIGNED_SHORT,h,b)};n.prototype.deleteBuffer=function(a){for(var g=$jscomp.makeIterator(a.attributeSchema.elements),h=g.next();!h.done;h=g.next()){h=h.value;var b=this.gl.getAttribLocation(this._currentProgram,
h.name);if(0>b)throw Error("The current program does not have a(n) '"+h.name+"' attribute.");this.gl.disableVertexAttribArray(b)}this.gl.deleteBuffer(a.buffer)};n.prototype.end=function(){this._currentProgram=null};var x=function(a){this.parent=document.getElementById(a);this.canvas=document.createElement("canvas");this.parent.appendChild(this.canvas);this.canvas.id=a+"-canvas";this.canvas.width=400;this.canvas.height=400;a=document.getElementById(a+"-canvas").getContext("webgl");if(null===a)throw Error("WebGL is not supported on this device.");
this.graphics=new n(a);this.initialized=!1;this.running=!0};x.prototype.run=function(){this.initialized||(this.initialize(),this.initialized=!0);this.update();this.draw();this.running&&window.requestAnimationFrame(this.run.bind(this))};x.prototype.initialize=function(){};x.prototype.update=function(){};x.prototype.draw=function(){};var u=function(a,c,b){Object.defineProperty(this,"name",{value:a,writable:!1});Object.defineProperty(this,"size",{value:c,writable:!1});Object.defineProperty(this,"type",
{value:b,writable:!1});this.offset=this.stride=0},r={BYTE:5120,SHORT:5122,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FIXED:void 0,FLOAT:5126};Object.freeze(r);var B={BYTE:1,SHORT:2,UNSIGNED_BYTE:1,UNSIGNED_SHORT:2,FIXED:void 0,FLOAT:4};Object.freeze(B);var E=function(a){Object.defineProperty(this,"elements",{value:a,writable:!1});var c=this.elements;for(var g=a=0,b=[],d=$jscomp.makeIterator(c),e=d.next();!e.done;e=d.next())switch(e=e.value,a+=e.size,b.push(g),e.type){case r.FLOAT:g+=B.FLOAT*e.size;break;
default:throw new TypeError("Unsupported attribute type.");}for(d=0;d<c.length;d++)c[d].stride=g,c[d].offset=b[d];c=g;Object.defineProperty(this,"size",{value:a,writable:!1});Object.defineProperty(this,"stride",{value:c,writable:!1})},F=function(a,c,b){Object.defineProperty(this,"program",{value:d(a.gl,c,b),writable:!1})},I=function(a){return F.call(this,a,"\n        uniform mat4 worldViewProjection;\n\n        attribute vec3 a_position;\n        attribute vec3 a_translation;\n        attribute vec3 a_scale;\n        attribute vec3 a_rotationOffset;\n        attribute float a_rotation;\n        attribute vec4 a_color;\n\n        varying lowp vec4 v_color;\n\n        mat4 createTranslation(vec3 translation) {\n            return mat4(\n                1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                translation.x, translation.y, translation.z, 1\n            );\n        }\n\n        mat4 createScale(vec3 scale) {\n            return mat4(\n                scale.x, 0, 0, 0,\n                0, scale.y, 0, 0,\n                0, 0, scale.z, 0,\n                0, 0, 0, 1\n            );\n        }\n\n        mat4 createRotationZ(float theta) {\n            return mat4(\n                cos(theta), -sin(theta), 0, 0,\n                sin(theta), cos(theta), 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1\n            );\n        }\n\n        void main() {\n            mat4 transform = createTranslation(a_rotationOffset) * createRotationZ(a_rotation) * createTranslation(-a_rotationOffset + a_translation) * createScale(a_scale);\n            gl_Position = transform * vec4(a_position, 1) * worldViewProjection;\n            v_color = a_color;\n        }\n    ",
"\n        varying lowp vec4 v_color;\n\n        void main() {\n            gl_FragColor = v_color;\n        }\n    ")||this};$jscomp.inherits(I,F);var w=function(a,c,b,d){this._r=a;this._g=c;this._b=b;this._a=d;Object.defineProperty(this,"r",{get:function(){return this._r*this._a},set:function(a){this._r=a}});Object.defineProperty(this,"g",{get:function(){return this._g*this._a},set:function(a){this._g=a}});Object.defineProperty(this,"b",{get:function(){return this._b*this._a},set:function(a){this._b=
a}});Object.defineProperty(this,"a",{get:function(){return this._a},set:function(a){this._a=a}});return new Proxy(this,L)};w.prototype.toArray=function(){return[this.r,this.g,this.b,this.a]};w.prototype.toString=function(){return"( "+parseInt(255*this.r)+" "+parseInt(255*this.g)+" "+parseInt(255*this.b)+" "+parseInt(255*this.a)+" )"};var J=function(a,c){return new w(((a&16711680)>>16)/255,((a&65280)>>8)/255,(a&255)/255,c)},M=new Set("r g b a _r _g _b _a".split(" ")),L={set:function(a,c,b){if(!M.has(c))throw new TypeError("Color does not have a(n) '"+
c+"' property; cannot set value.");f(b,"number");b=v(b);return Reflect.set(a,c,b)}},t=new Proxy(w,{construct:function(a,c){a=$jscomp.makeIterator(c);for(var g=a.next();!g.done;g=a.next())f(g.value,"number");a=c.map(function(a){return v(a)});switch(c.length){case 0:return new w(0,0,0,1);case 1:return new J(c[0],1);case 2:return new J(c[0],a[1]);case 3:return new (Function.prototype.bind.apply(w,[null].concat($jscomp.arrayFromIterable(a),[1])));case 4:return new (Function.prototype.bind.apply(w,[null].concat($jscomp.arrayFromIterable(a))));
default:throw new TypeError("'Color' does not have a constructor with "+c.length+" arguments.");}}}),K={Black:new t(0),White:new t(16777215),Red:new t(16711680),Green:new t(65280),Blue:new t(255),SkyBlue:new t(2731519)};Object.freeze(K);var G={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};Object.freeze(G);var y={VERTEX:0,INDEX:1};Object.freeze(y);var z=function(a,c,b){Object.defineProperty(this,"_graphics",{value:a});Object.defineProperty(this,"length",{value:c,
writable:!1});Object.defineProperty(this,"type",{value:b,writable:!1});this.buffer=this.data=null};z.prototype.setData=function(a){if(a.length!=this.length)throw new TypeError("Expected an array with "+this.length+" element(s). Received an array with "+a.length+" element(s) instead.");this.data.set(a);switch(this.type){case y.VERTEX:a=this._graphics.gl;var c=a.ARRAY_BUFFER,g=this.data;a.bindBuffer(c,this.buffer);a.bufferSubData(c,0,g);break;case y.INDEX:a=this._graphics.gl;c=a.ELEMENT_ARRAY_BUFFER;
g=this.data;a.bindBuffer(c,this.buffer);a.bufferSubData(c,0,g);break;default:throw new TypeError("'"+this.type+"' is an invalid BufferType.");}};var H=function(a,c){c=z.call(this,a,c,y.INDEX)||this;c.data=new Int16Array(c.length);a=a.gl;a=b(a,a.ELEMENT_ARRAY_BUFFER,c.data.byteLength,a.STATIC_DRAW);c.buffer=a;return c};$jscomp.inherits(H,z);var A={STREAM:35040,STATIC:35044,DYNAMIC:35048};Object.freeze(A);var C=function(a,c,d,e,f){d=z.call(this,a,d,y.VERTEX)||this;Object.defineProperty(d,"attributeSchema",
{value:c,writable:!1});Object.defineProperty(d,"vertexUsage",{value:void 0!==e?e:A.STATIC,writable:!1});Object.defineProperty(d,"instanceFrequency",{value:void 0!==f?f:0,writable:!1});d.data=new Float32Array(d.length);a=a.gl;c=d.data.byteLength;e=d.vertexUsage;f=c;switch(e){case a.DYNAMIC_DRAW:f=4*c}a=b(a,a.ARRAY_BUFFER,f,e);d.buffer=a;return d};$jscomp.inherits(C,z);var l=function(a,c,b){this.x=a;this.y=c;this.z=b};l.prototype.multiply=function(a){this.x*=a;this.y*=a;this.z*=a};l.prototype.divide=
function(a){this.x/=a;this.y/=a;this.z/=a};l.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};l.prototype.normalize=function(){var a=this.length();0<a&&this.divide(a)};l.prototype.toArray=function(){return[this.x,this.y,this.z]};l.dot=function(a,c){return a.x*c.x+a.y*c.y+a.z*c.z};l.cross=function(a,c){return new l(a.y*c.z-c.y*a.z,-(a.x*c.z-c.x*a.z),a.x*c.y-c.x*a.y)};l.subtract=function(a,c){return new l(a.x-c.x,a.y-c.y,a.z-c.z)};var N=new Set("position scale rotationOffset rotation color _position _scale _rotationOffset _rotation _color _transformChanged".split(" ")),
O={set:function(a,c,b){if(!N.has(c))throw new TypeError("Polygon does not have a(n) '"+c+"' property; cannot set value.");var d="Cannot set '"+c+"' property.";switch(c){case "position":case "_position":case "scale":case "_scale":case "rotationOffset":case "_rotationOffset":p(b,l,{addendum:d});break;case "color":case "_color":p(b,t,{addendum:d});break;case "rotation":case "_rotation":f(b,"number",{addendum:d});break;case "_transformChanged":f(b,"boolean",{addendum:d})}return Reflect.set(a,c,b)}},D=
function(a,c){Object.defineProperty(this,"geometry",{value:c,writable:!1});Object.defineProperty(this,"attributeSchema",{value:new E([new u("a_translation",3,r.FLOAT),new u("a_scale",3,r.FLOAT),new u("a_rotationOffset",3,r.FLOAT),new u("a_rotation",1,r.FLOAT),new u("a_color",4,r.FLOAT)]),writable:!1});Object.defineProperty(this,"position",{get:function(){return this._position},set:function(a){this._position!==a&&(this._position=a,this._transformChanged=!0)}});Object.defineProperty(this,"scale",{get:function(){return this._scale},
set:function(a){this._scale!==a&&(this._scale=a,this._transformChanged=!0)}});Object.defineProperty(this,"rotationOffset",{get:function(){return this._rotationOffset},set:function(a){this._rotationOffset!==a&&(this._rotationOffset=a,this._transformChanged=!0)}});Object.defineProperty(this,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation!==a&&(this._rotation=a,this._transformChanged=!0)}});Object.defineProperty(this,"color",{get:function(){return this._color},set:function(a){this._color!==
a&&(this._color=a,this._transformChanged=!0)}});this._position=new l(0,0,0);this._scale=new l(1,1,1);this._rotationOffset=new l(0,0,0);this._rotation=0;this._color=new t(16777215);Object.defineProperty(this,"transformBuffer",{value:new C(a,this.attributeSchema,1*this.attributeSchema.size,A.DYNAMIC,1),writable:!1});this._updateBuffer();this._transformChanged=!1;return new Proxy(this,O)};D.prototype.applyChanges=function(){this._transformChanged&&(this._transformChanged=!1,this._updateBuffer())};D.prototype.draw=
function(a,c,b){this._transformChanged&&this.applyChanges();a.begin(c);a.setVertexBuffers([this.geometry.vertexBuffer,this.transformBuffer]);a.setIndexBuffer(this.geometry.indexBuffer);a.setUniform("worldViewProjection",b.worldViewProjection.data);a.drawElements(G.TRIANGLES,this.geometry.totalTriangles,0);a.end()};D.prototype._updateBuffer=function(){var a=[].concat(this._position.toArray(),this._scale.toArray(),this._rotationOffset.toArray(),this._rotation,this._color.toArray());this.transformBuffer.setData(a)};
var P=new E([new u("a_position",3,r.FLOAT)]),q=function(a,c,b){this._rows=a;this._columns=c;this._data=Array(this._rows*this._columns).fill(0);Object.defineProperty(this,"rows",{get:function(){return this._rows}});Object.defineProperty(this,"columns",{get:function(){return this._columns}});Object.defineProperty(this,"data",{get:function(){return this._data}});void 0!==b&&this.setData(b)};q.prototype.get=function(a,c){return this.data[this.columns*c+a]};q.prototype.setData=function(a){f(a,"array");
if(a.length!==this.rows*this.columns)throw new TypeError("The data does not match the dimensions of the matrix.");this._data=a.slice(0)};q.prototype.set=function(a,c,b){f(b,"number");this._data[this.columns*c+a]=b};q.prototype.transpose=function(){for(var a=Array(this.rows*this.columns).fill(0),c=this.columns,b=this.rows,d=0;d<c;d++)for(var e=0;e<b;e++)a[b*d+e]=this.data[this.columns*e+d];this._data=a;this._rows=c;this._columns=b};q.prototype.add=function(a){if(f(a,"number",{throwError:!1}))for(var c=
0;c<this.rows*this.columns;c++)this._data[c]+=a;else{p(a,q);if(this.rows!==a.rows||this.columns!==a.columns)throw new TypeError("Both matrices are not the same size; cannot perform operation.");for(c=0;c<this.rows*this.columns;c++)this._data[c]+=a.data[c]}};q.prototype.subtract=function(a){if(f(a,"number",{throwError:!1}))for(var c=0;c<this.rows*this.columns;c++)this._data[c]-=a;else{p(a,q);if(this.rows!==a.rows||this.columns!==a.columns)throw new TypeError("Both matrices are not the same size; cannot perform operation.");
for(c=0;c<this.rows*this.columns;c++)this._data[c]-=a.data[c]}};q.prototype.multiply=function(a){if(f(a,"number",{throwError:!1}))for(var c=0;c<this.rows*this.columns;c++)this._data[c]*=a;else{p(a,q);if(this.columns!==a.rows)throw new TypeError("The matrix provided must have "+this.columns+" rows; cannot multiply matrices.");c=new q(this.rows,a.columns);for(var b=0;b<this.rows;b++)for(var d=0;d<this.columns;d++)for(var e=0;e<a.columns;e++)c.set(e,b,c.get(e,b)+this.get(d,b)*a.get(e,d));this._data=
c.data}};q.prototype.divide=function(a){f(a,"number");a=1/a;for(var c=0;c<this.rows*this.columns;c++)this._data[c]*=a};q.prototype.toString=function(){for(var a="",c=0;c<this._data.length;c+=this.columns){a+="( "+this._data[c];for(var b=1;b<this.columns;b++)a+=" "+this._data[c+b];a+=" )";c!==this._data.length-this.columns&&(a+=" ")}return a};var m=function(a){this.columns=this.rows=4;this.data=Array(this.rows*this.columns).fill(0);a&&this.setData(a)};m.prototype.get=function(a,c){return this.data[this.columns*
c+a]};m.prototype.setData=function(a){if(a.length!==this.rows*this.columns)throw Error("The data does not match the dimensions of the matrix.");this.data=a};m.prototype.set=function(a,c,b){this.data[this.columns*c+a]=b};m.prototype.toString=function(){for(var a="",c=0;c<this.data.length;c+=this.columns){a+="( "+this.data[c];for(var b=1;b<this.columns;b++)a+=" "+this.data[c+b];a+=" )";c!==this.data.length-this.columns&&(a+=" ")}return a};m.multiply=function(a,b){for(var c=new m,d=0;d<a.rows;d++)for(var e=
0;e<a.columns;e++)for(var f=0;f<b.columns;f++)c.set(f,d,c.get(f,d)+a.get(e,d)*b.get(f,e));return c};m.identity=function(){return new m([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};m.createRotationZ=function(a){var b=m.identity();b.set(0,0,Math.cos(a));b.set(1,0,Math.sin(a));b.set(0,1,-Math.sin(a));b.set(1,1,Math.cos(a));return b};m.createTranslation=function(a,b,d){var c=m.identity();a&&c.set(0,3,a);b&&c.set(1,3,b);d&&c.set(2,3,d);return c};m.createOrthographic=function(a,b,d,e){var c=m.identity();c.set(0,
0,2/a);c.set(1,1,2/b);c.set(2,2,1/(d-e));c.set(2,3,d/(d-e));return c};m.createLookAt=function(a,b,d){b=l.subtract(a,b);b.normalize();d=l.cross(d,b);d.normalize();var c=l.cross(b,d),e=m.identity();e.set(0,0,d.x);e.set(1,0,c.x);e.set(2,0,b.x);e.set(0,1,d.y);e.set(1,1,c.y);e.set(2,1,b.y);e.set(0,2,d.z);e.set(1,2,c.z);e.set(2,2,b.z);e.set(0,3,-l.dot(d,a));e.set(1,3,-l.dot(c,a));e.set(2,3,-l.dot(b,a));return e};a.AttributeElement=u;a.AttributeSchema=E;a.AttributeType=r;a.BasicEffect=I;a.Camera=function(){this.world=
m.createTranslation(0,0,0);this.view=m.createLookAt(new l(0,0,1),new l(0,0,0),new l(0,1,0));this.projection=m.createOrthographic(4,4,0,16);this.worldViewProjection=m.multiply(m.multiply(this.view,this.world),this.projection)};a.Color=t;a.Colors=K;a.DrawMode=G;a.DynamicMatrix=q;a.Effect=F;a.IndexBuffer=H;a.Matrix=m;a.Polygon=D;a.PolygonData=function(a,b,d){Object.defineProperty(this,"vertexBuffer",{value:new C(a,P,b.length,A.STATIC),writable:!1});Object.defineProperty(this,"indexBuffer",{value:new H(a,
d.length),writable:!1});Object.defineProperty(this,"totalVertices",{value:b.length/3,writable:!1});Object.defineProperty(this,"totalTriangles",{value:d.length/3,writable:!1});this.vertexBuffer.setData(b);this.indexBuffer.setData(d)};a.Sketch=x;a.Vector2=l;a.Vector3=l;a.Vector4=l;a.VertexBuffer=C;a.VertexUsage=A;Object.defineProperty(a,"__esModule",{value:!0})});
